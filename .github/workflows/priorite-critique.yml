name: Alerte Priorit√© Critique

on:
  issues:
    types:
      - labeled

jobs:
  gestion-priorite:
    # Ex√©cuter uniquement si le label ajout√© est "Critical"
    if: github.event.label.name == 'Critical'

    runs-on: ubuntu-latest

    permissions:
      issues: write

    steps:
      - name: Assigner le Lead Dev et ajouter un commentaire
        uses: actions/github-script@v7
        with:
          script: |
            // 1Ô∏è‚É£ Assignation automatique du Lead Developer
            github.rest.issues.addAssignees({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              assignees: [context.repo.owner] // Assignation au propri√©taire du d√©p√¥t
            });

            // 2Ô∏è‚É£ Ajout d‚Äôun commentaire d‚Äôalerte sur l‚Äôissue
            github.rest.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: "üö® **Alerte :** Ce ticket a √©t√© marqu√© comme **Critique**. Assignation automatique effectu√©e."
            });
